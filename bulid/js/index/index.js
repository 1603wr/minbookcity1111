"use strict";define(["jquery","text!template/index.html","temp","Swiper","text!template/hot.html","text!template/command.html","BScroll","text!template/dl-list.html","lazyload"],function(s,a,c,l,d,m,t,r,o){s(function(){var t=0;function e(t,a){var o=5*t,e=5*t+5,n=a.slice(o,e);return n.map(function(t,a){return t.count=a+1,t.count}),n}s(".head span").on("click",function(){t=s(this).index()-1,s(".head span").addClass("active").siblings().removeClass("active"),s(".content").css({transform:"translateX(-"+100*t+"%)"})}),s.ajax({url:"/api/home",dataType:"json",success:function(o){c(a,o.items[0].data,".ban"),new l(".page",{autoplay:!0,loop:!0}),console.log(o),c(d,o.items[1].data.data,".hot-cont");c(m,e(0,o.items[2].data.data),".command-cont"),c(r,e(0,o.items[3].data.data),".girl-cont"),c(r,e(0,o.items[4].data.data),".boy-cont"),s(".change-btns").on("click",function(){var t=1*s(this).data("num");t++,s(this).data("num",t),console.log(t),t%=o.items[s(this).attr("id")].data.count/5;var a=2==s(this).attr("id")?m:r;c(a,e(t,o.items[s(this).attr("id")].data.data),"."+s(this).prev().attr("class")),s("img.lazy").lazyload({effect:"fadeIn",container:s(".book-one")})}),c(s(".text").html(),o.items[6].data,".best-cont"),o.items[5].data.data.map(function(t,a){t.title=t.data.title,t.cover=t.data.cover}),c(d,o.items[5].data.data,".free-cont"),s("img.lazy").lazyload({effect:"fadeIn",container:s(".book-one")}),i(".book-one")}}),s.ajax({url:"/api/bookself",dataType:"json",success:function(t){console.log(t),c(d,t.items,".booktwobox"),s(".book-two").on("click",".change-btn",function(){s(this).toggleClass("ac"),s(this).hasClass("ac")?c(r,t.items,".booktwobox"):c(d,t.items,".booktwobox"),s("img").lazyload({effect:"fadeIn",container:s(".book-two")})}),s("img").lazyload({effect:"fadeIn",container:s(".book-two")})}});var n=0;function i(t){var o=s(t).height();s(t).on("scroll",function(){if(3<=n)return s(".loadmoring").html("暂无更多数据"),!1;var t,a=s(this).children().height();s(this).scrollTop()+40>=a-o&&(s(this).off("scroll"),t=++n,s.ajax({url:"/api/loadmore",data:{pagenum:t,limit:20},dataType:"json",success:function(t){c(r,t.items,".load-box",1),i(".book-one"),s("img.lazy").lazyload({effect:"fadeIn",container:s(".book-one")})}}))})}})});